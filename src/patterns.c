/* 
 * 240p Test Suite for the Sega 32X
 * Port by Dasutin
 * Copyright (C)2011-2021 Artemio Urbina
 *
 * This file is part of the 240p Test Suite
 *
 * The 240p Test Suite is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * The 240p Test Suite is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with 240p Test Suite; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */

#include "types.h"
#include "32x.h"
#include "hw_32x.h"
#include "32x_images.h"
#include "patterns.h"
#include "shared_objects.h"
#include "help.h"

#define BLOCK_COLOR_1 160
#define BLOCK_COLOR_2 161
#define BLOCK_COLOR_3 162
#define BLOCK_COLOR_4 163
#define BLOCK_COLOR_5 164
#define BLOCK_COLOR_6 165
#define BLOCK_COLOR_7 166
#define BLOCK_COLOR_8 167

#define WHITE_COLOR_1 32
#define WHITE_COLOR_2 33
#define WHITE_COLOR_3 34
#define WHITE_COLOR_4 35
#define WHITE_COLOR_5 36
#define WHITE_COLOR_6 37
#define WHITE_COLOR_7 38
#define WHITE_COLOR_8 39
#define WHITE_COLOR_9 40
#define WHITE_COLOR_10 41
#define WHITE_COLOR_11 42
#define WHITE_COLOR_12 43
#define WHITE_COLOR_13 44
#define WHITE_COLOR_14 45
#define WHITE_COLOR_15 46
#define WHITE_COLOR_16 47
#define WHITE_COLOR_17 48
#define WHITE_COLOR_18 49
#define WHITE_COLOR_19 50
#define WHITE_COLOR_20 51
#define WHITE_COLOR_21 52
#define WHITE_COLOR_22 53
#define WHITE_COLOR_23 54
#define WHITE_COLOR_24 55
#define WHITE_COLOR_25 56
#define WHITE_COLOR_26 57
#define WHITE_COLOR_27 58
#define WHITE_COLOR_28 59
#define WHITE_COLOR_29 60
#define WHITE_COLOR_30 61
#define WHITE_COLOR_31 62

#define BLUE_COLOR_1 63
#define BLUE_COLOR_2 64
#define BLUE_COLOR_3 65
#define BLUE_COLOR_4 66
#define BLUE_COLOR_5 67
#define BLUE_COLOR_6 68
#define BLUE_COLOR_7 69
#define BLUE_COLOR_8 70
#define BLUE_COLOR_9 71
#define BLUE_COLOR_10 72
#define BLUE_COLOR_11 73
#define BLUE_COLOR_12 74
#define BLUE_COLOR_13 75
#define BLUE_COLOR_14 76
#define BLUE_COLOR_15 77
#define BLUE_COLOR_16 78
#define BLUE_COLOR_17 79
#define BLUE_COLOR_18 80
#define BLUE_COLOR_19 81
#define BLUE_COLOR_20 82
#define BLUE_COLOR_21 83
#define BLUE_COLOR_22 84
#define BLUE_COLOR_23 85
#define BLUE_COLOR_24 86
#define BLUE_COLOR_25 87
#define BLUE_COLOR_26 88
#define BLUE_COLOR_27 89
#define BLUE_COLOR_28 90
#define BLUE_COLOR_29 91
#define BLUE_COLOR_30 92
#define BLUE_COLOR_31 93

#define GREEN_COLOR_1 94
#define GREEN_COLOR_2 95
#define GREEN_COLOR_3 96
#define GREEN_COLOR_4 97
#define GREEN_COLOR_5 98
#define GREEN_COLOR_6 99
#define GREEN_COLOR_7 100
#define GREEN_COLOR_8 101
#define GREEN_COLOR_9 102
#define GREEN_COLOR_10 103
#define GREEN_COLOR_11 104
#define GREEN_COLOR_12 105
#define GREEN_COLOR_13 106
#define GREEN_COLOR_14 107
#define GREEN_COLOR_15 108
#define GREEN_COLOR_16 109
#define GREEN_COLOR_17 110
#define GREEN_COLOR_18 111
#define GREEN_COLOR_19 112
#define GREEN_COLOR_20 113
#define GREEN_COLOR_21 114
#define GREEN_COLOR_22 115
#define GREEN_COLOR_23 116
#define GREEN_COLOR_24 117
#define GREEN_COLOR_25 118
#define GREEN_COLOR_26 119
#define GREEN_COLOR_27 120
#define GREEN_COLOR_28 121
#define GREEN_COLOR_29 122
#define GREEN_COLOR_30 123
#define GREEN_COLOR_31 124

#define RED_COLOR_1 125
#define RED_COLOR_2 126
#define RED_COLOR_3 127
#define RED_COLOR_4 128
#define RED_COLOR_5 129
#define RED_COLOR_6 130
#define RED_COLOR_7 131
#define RED_COLOR_8 132
#define RED_COLOR_9 133
#define RED_COLOR_10 134
#define RED_COLOR_11 135
#define RED_COLOR_12 136
#define RED_COLOR_13 137
#define RED_COLOR_14 138
#define RED_COLOR_15 139
#define RED_COLOR_16 140
#define RED_COLOR_17 141
#define RED_COLOR_18 142 
#define RED_COLOR_19 143
#define RED_COLOR_20 144
#define RED_COLOR_21 145
#define RED_COLOR_22 146
#define RED_COLOR_23 147
#define RED_COLOR_24 148
#define RED_COLOR_25 149
#define RED_COLOR_26 150
#define RED_COLOR_27 151
#define RED_COLOR_28 152
#define RED_COLOR_29 153
#define RED_COLOR_30 154 
#define RED_COLOR_31 155

void tp_pluge()
{
	u16 done = 0;
	int frameDelay = 5;
	int pattern = 1;
	unsigned short button, pressedButton, oldButton = 0xFFFF;
	extern const u16 PLUGE_NTSC_PALETTE_DATA[];
	extern const u16 PLUGE_RGB_PALETTE_DATA[];
	extern const u8 PLUGE_PATTERN[];
	vu16 *cram16 = &MARS_CRAM;
	MARS_SYS_COMM6 = 0;

	for (int i = 0; i < 255; i++){
		cram16[i] = PLUGE_NTSC_PALETTE_DATA[i] & 0x7FFF;
	}

	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done)
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

		pressedButton = button & ~oldButton;
    	oldButton = button;

    	switch (pattern) {
			case 1:
				for (int i = 0; i < 255; i++){
					cram16[i] = PLUGE_NTSC_PALETTE_DATA[i] & 0x7FFF;
				}
			break;
				
			case 2:
				for (int i = 0; i < 255; i++){
					cram16[i] = PLUGE_RGB_PALETTE_DATA[i] & 0x7FFF;
				}
			break;
		}

		if (pressedButton & SEGA_CTRL_A)
		{
			pattern++;
	
			if(pattern > 2){
		 		pattern = 1;
			}
		}

    	if (pressedButton & SEGA_CTRL_B)
		{
			done = 1;
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_PLUGE);

			for (int i = 0; i < 255; i++){
				cram16[i] = PLUGE_NTSC_PALETTE_DATA[i] & 0x7FFF;
			}
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		drawBG(PLUGE_PATTERN);

		MARS_SYS_COMM6 = 1;

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		drawLineTable(4);

		Hw32xDelay(frameDelay);
	}
	return;
}

void tp_colorchart()
{
	u16 done = 0;
	int frameDelay = 5;
	u16 button, pressedButton, oldButton = 0xFFFF;
	MARS_SYS_COMM6 = 0;

	vu8 whiteColor1[8] = {WHITE_COLOR_1,WHITE_COLOR_1,WHITE_COLOR_1,WHITE_COLOR_1,WHITE_COLOR_1,WHITE_COLOR_1,WHITE_COLOR_1,WHITE_COLOR_1};
	vu8 whiteColor2[8] = {WHITE_COLOR_2,WHITE_COLOR_2,WHITE_COLOR_2,WHITE_COLOR_2,WHITE_COLOR_2,WHITE_COLOR_2,WHITE_COLOR_2,WHITE_COLOR_2};
	vu8 whiteColor3[8] = {WHITE_COLOR_3,WHITE_COLOR_3,WHITE_COLOR_3,WHITE_COLOR_3,WHITE_COLOR_3,WHITE_COLOR_3,WHITE_COLOR_3,WHITE_COLOR_3};
	vu8 whiteColor4[8] = {WHITE_COLOR_4,WHITE_COLOR_4,WHITE_COLOR_4,WHITE_COLOR_4,WHITE_COLOR_4,WHITE_COLOR_4,WHITE_COLOR_4,WHITE_COLOR_4};
	vu8 whiteColor5[8] = {WHITE_COLOR_5,WHITE_COLOR_5,WHITE_COLOR_5,WHITE_COLOR_5,WHITE_COLOR_5,WHITE_COLOR_5,WHITE_COLOR_5,WHITE_COLOR_5};
	vu8 whiteColor6[8] = {WHITE_COLOR_6,WHITE_COLOR_6,WHITE_COLOR_6,WHITE_COLOR_6,WHITE_COLOR_6,WHITE_COLOR_6,WHITE_COLOR_6,WHITE_COLOR_6};
	vu8 whiteColor7[8] = {WHITE_COLOR_7,WHITE_COLOR_7,WHITE_COLOR_7,WHITE_COLOR_7,WHITE_COLOR_7,WHITE_COLOR_7,WHITE_COLOR_7,WHITE_COLOR_7};
	vu8 whiteColor8[8] = {WHITE_COLOR_8,WHITE_COLOR_8,WHITE_COLOR_8,WHITE_COLOR_8,WHITE_COLOR_8,WHITE_COLOR_8,WHITE_COLOR_8,WHITE_COLOR_8};
	vu8 whiteColor9[8] = {WHITE_COLOR_9,WHITE_COLOR_9,WHITE_COLOR_9,WHITE_COLOR_9,WHITE_COLOR_9,WHITE_COLOR_9,WHITE_COLOR_9,WHITE_COLOR_9};
	vu8 whiteColor10[8] = {WHITE_COLOR_10,WHITE_COLOR_10,WHITE_COLOR_10,WHITE_COLOR_10,WHITE_COLOR_10,WHITE_COLOR_10,WHITE_COLOR_10,WHITE_COLOR_10};
	vu8 whiteColor11[8] = {WHITE_COLOR_11,WHITE_COLOR_11,WHITE_COLOR_11,WHITE_COLOR_11,WHITE_COLOR_11,WHITE_COLOR_11,WHITE_COLOR_11,WHITE_COLOR_11};
	vu8 whiteColor12[8] = {WHITE_COLOR_12,WHITE_COLOR_12,WHITE_COLOR_12,WHITE_COLOR_12,WHITE_COLOR_12,WHITE_COLOR_12,WHITE_COLOR_12,WHITE_COLOR_12};
	vu8 whiteColor13[8] = {WHITE_COLOR_13,WHITE_COLOR_13,WHITE_COLOR_13,WHITE_COLOR_13,WHITE_COLOR_13,WHITE_COLOR_13,WHITE_COLOR_13,WHITE_COLOR_13};
	vu8 whiteColor14[8] = {WHITE_COLOR_14,WHITE_COLOR_14,WHITE_COLOR_14,WHITE_COLOR_14,WHITE_COLOR_14,WHITE_COLOR_14,WHITE_COLOR_14,WHITE_COLOR_14};
	vu8 whiteColor15[8] = {WHITE_COLOR_15,WHITE_COLOR_15,WHITE_COLOR_15,WHITE_COLOR_15,WHITE_COLOR_15,WHITE_COLOR_15,WHITE_COLOR_15,WHITE_COLOR_15};
	vu8 whiteColor16[8] = {WHITE_COLOR_16,WHITE_COLOR_16,WHITE_COLOR_16,WHITE_COLOR_16,WHITE_COLOR_16,WHITE_COLOR_16,WHITE_COLOR_16,WHITE_COLOR_16};
	vu8 whiteColor17[8] = {WHITE_COLOR_17,WHITE_COLOR_17,WHITE_COLOR_17,WHITE_COLOR_17,WHITE_COLOR_17,WHITE_COLOR_17,WHITE_COLOR_17,WHITE_COLOR_17};
	vu8 whiteColor18[8] = {WHITE_COLOR_18,WHITE_COLOR_18,WHITE_COLOR_18,WHITE_COLOR_18,WHITE_COLOR_18,WHITE_COLOR_18,WHITE_COLOR_18,WHITE_COLOR_18};
	vu8 whiteColor19[8] = {WHITE_COLOR_19,WHITE_COLOR_19,WHITE_COLOR_19,WHITE_COLOR_19,WHITE_COLOR_19,WHITE_COLOR_19,WHITE_COLOR_19,WHITE_COLOR_19};
	vu8 whiteColor20[8] = {WHITE_COLOR_20,WHITE_COLOR_20,WHITE_COLOR_20,WHITE_COLOR_20,WHITE_COLOR_20,WHITE_COLOR_20,WHITE_COLOR_20,WHITE_COLOR_20};
	vu8 whiteColor21[8] = {WHITE_COLOR_21,WHITE_COLOR_21,WHITE_COLOR_21,WHITE_COLOR_21,WHITE_COLOR_21,WHITE_COLOR_21,WHITE_COLOR_21,WHITE_COLOR_21};
	vu8 whiteColor22[8] = {WHITE_COLOR_22,WHITE_COLOR_22,WHITE_COLOR_22,WHITE_COLOR_22,WHITE_COLOR_22,WHITE_COLOR_22,WHITE_COLOR_22,WHITE_COLOR_22};
	vu8 whiteColor23[8] = {WHITE_COLOR_23,WHITE_COLOR_23,WHITE_COLOR_23,WHITE_COLOR_23,WHITE_COLOR_23,WHITE_COLOR_23,WHITE_COLOR_23,WHITE_COLOR_23};
	vu8 whiteColor24[8] = {WHITE_COLOR_24,WHITE_COLOR_24,WHITE_COLOR_24,WHITE_COLOR_24,WHITE_COLOR_24,WHITE_COLOR_24,WHITE_COLOR_24,WHITE_COLOR_24};
	vu8 whiteColor25[8] = {WHITE_COLOR_25,WHITE_COLOR_25,WHITE_COLOR_25,WHITE_COLOR_25,WHITE_COLOR_25,WHITE_COLOR_25,WHITE_COLOR_25,WHITE_COLOR_25};
	vu8 whiteColor26[8] = {WHITE_COLOR_26,WHITE_COLOR_26,WHITE_COLOR_26,WHITE_COLOR_26,WHITE_COLOR_26,WHITE_COLOR_26,WHITE_COLOR_26,WHITE_COLOR_26};
	vu8 whiteColor27[8] = {WHITE_COLOR_27,WHITE_COLOR_27,WHITE_COLOR_27,WHITE_COLOR_27,WHITE_COLOR_27,WHITE_COLOR_27,WHITE_COLOR_27,WHITE_COLOR_27};
	vu8 whiteColor28[8] = {WHITE_COLOR_28,WHITE_COLOR_28,WHITE_COLOR_28,WHITE_COLOR_28,WHITE_COLOR_28,WHITE_COLOR_28,WHITE_COLOR_28,WHITE_COLOR_28};
	vu8 whiteColor29[8] = {WHITE_COLOR_29,WHITE_COLOR_29,WHITE_COLOR_29,WHITE_COLOR_29,WHITE_COLOR_29,WHITE_COLOR_29,WHITE_COLOR_29,WHITE_COLOR_29};
	vu8 whiteColor30[8] = {WHITE_COLOR_30,WHITE_COLOR_30,WHITE_COLOR_30,WHITE_COLOR_30,WHITE_COLOR_30,WHITE_COLOR_30,WHITE_COLOR_30,WHITE_COLOR_30};
	vu8 whiteColor31[8] = {WHITE_COLOR_31,WHITE_COLOR_31,WHITE_COLOR_31,WHITE_COLOR_31,WHITE_COLOR_31,WHITE_COLOR_31,WHITE_COLOR_31,WHITE_COLOR_31};

	vu8 blueColor1[8] = {BLUE_COLOR_1,BLUE_COLOR_1,BLUE_COLOR_1,BLUE_COLOR_1,BLUE_COLOR_1,BLUE_COLOR_1,BLUE_COLOR_1,BLUE_COLOR_1};
	vu8 blueColor2[8] = {BLUE_COLOR_2,BLUE_COLOR_2,BLUE_COLOR_2,BLUE_COLOR_2,BLUE_COLOR_2,BLUE_COLOR_2,BLUE_COLOR_2,BLUE_COLOR_2};
	vu8 blueColor3[8] = {BLUE_COLOR_3,BLUE_COLOR_3,BLUE_COLOR_3,BLUE_COLOR_3,BLUE_COLOR_3,BLUE_COLOR_3,BLUE_COLOR_3,BLUE_COLOR_3};
	vu8 blueColor4[8] = {BLUE_COLOR_4,BLUE_COLOR_4,BLUE_COLOR_4,BLUE_COLOR_4,BLUE_COLOR_4,BLUE_COLOR_4,BLUE_COLOR_4,BLUE_COLOR_4};
	vu8 blueColor5[8] = {BLUE_COLOR_5,BLUE_COLOR_5,BLUE_COLOR_5,BLUE_COLOR_5,BLUE_COLOR_5,BLUE_COLOR_5,BLUE_COLOR_5,BLUE_COLOR_5};
	vu8 blueColor6[8] = {BLUE_COLOR_6,BLUE_COLOR_6,BLUE_COLOR_6,BLUE_COLOR_6,BLUE_COLOR_6,BLUE_COLOR_6,BLUE_COLOR_6,BLUE_COLOR_6};
	vu8 blueColor7[8] = {BLUE_COLOR_7,BLUE_COLOR_7,BLUE_COLOR_7,BLUE_COLOR_7,BLUE_COLOR_7,BLUE_COLOR_7,BLUE_COLOR_7,BLUE_COLOR_7};
	vu8 blueColor8[8] = {BLUE_COLOR_8,BLUE_COLOR_8,BLUE_COLOR_8,BLUE_COLOR_8,BLUE_COLOR_8,BLUE_COLOR_8,BLUE_COLOR_8,BLUE_COLOR_8};
	vu8 blueColor9[8] = {BLUE_COLOR_9,BLUE_COLOR_9,BLUE_COLOR_9,BLUE_COLOR_9,BLUE_COLOR_9,BLUE_COLOR_9,BLUE_COLOR_9,BLUE_COLOR_9};
	vu8 blueColor10[8] = {BLUE_COLOR_10,BLUE_COLOR_10,BLUE_COLOR_10,BLUE_COLOR_10,BLUE_COLOR_10,BLUE_COLOR_10,BLUE_COLOR_10,BLUE_COLOR_10};
	vu8 blueColor11[8] = {BLUE_COLOR_11,BLUE_COLOR_11,BLUE_COLOR_11,BLUE_COLOR_11,BLUE_COLOR_11,BLUE_COLOR_11,BLUE_COLOR_11,BLUE_COLOR_11};
	vu8 blueColor12[8] = {BLUE_COLOR_12,BLUE_COLOR_12,BLUE_COLOR_12,BLUE_COLOR_12,BLUE_COLOR_12,BLUE_COLOR_12,BLUE_COLOR_12,BLUE_COLOR_12};
	vu8 blueColor13[8] = {BLUE_COLOR_13,BLUE_COLOR_13,BLUE_COLOR_13,BLUE_COLOR_13,BLUE_COLOR_13,BLUE_COLOR_13,BLUE_COLOR_13,BLUE_COLOR_13};
	vu8 blueColor14[8] = {BLUE_COLOR_14,BLUE_COLOR_14,BLUE_COLOR_14,BLUE_COLOR_14,BLUE_COLOR_14,BLUE_COLOR_14,BLUE_COLOR_14,BLUE_COLOR_14};
	vu8 blueColor15[8] = {BLUE_COLOR_15,BLUE_COLOR_15,BLUE_COLOR_15,BLUE_COLOR_15,BLUE_COLOR_15,BLUE_COLOR_15,BLUE_COLOR_15,BLUE_COLOR_15};
	vu8 blueColor16[8] = {BLUE_COLOR_16,BLUE_COLOR_16,BLUE_COLOR_16,BLUE_COLOR_16,BLUE_COLOR_16,BLUE_COLOR_16,BLUE_COLOR_16,BLUE_COLOR_16};
	vu8 blueColor17[8] = {BLUE_COLOR_17,BLUE_COLOR_17,BLUE_COLOR_17,BLUE_COLOR_17,BLUE_COLOR_17,BLUE_COLOR_17,BLUE_COLOR_17,BLUE_COLOR_17};
	vu8 blueColor18[8] = {BLUE_COLOR_18,BLUE_COLOR_18,BLUE_COLOR_18,BLUE_COLOR_18,BLUE_COLOR_18,BLUE_COLOR_18,BLUE_COLOR_18,BLUE_COLOR_18};
	vu8 blueColor19[8] = {BLUE_COLOR_19,BLUE_COLOR_19,BLUE_COLOR_19,BLUE_COLOR_19,BLUE_COLOR_19,BLUE_COLOR_19,BLUE_COLOR_19,BLUE_COLOR_19};
	vu8 blueColor20[8] = {BLUE_COLOR_20,BLUE_COLOR_20,BLUE_COLOR_20,BLUE_COLOR_20,BLUE_COLOR_20,BLUE_COLOR_20,BLUE_COLOR_20,BLUE_COLOR_20};
	vu8 blueColor21[8] = {BLUE_COLOR_21,BLUE_COLOR_21,BLUE_COLOR_21,BLUE_COLOR_21,BLUE_COLOR_21,BLUE_COLOR_21,BLUE_COLOR_21,BLUE_COLOR_21};
	vu8 blueColor22[8] = {BLUE_COLOR_22,BLUE_COLOR_22,BLUE_COLOR_22,BLUE_COLOR_22,BLUE_COLOR_22,BLUE_COLOR_22,BLUE_COLOR_22,BLUE_COLOR_22};
	vu8 blueColor23[8] = {BLUE_COLOR_23,BLUE_COLOR_23,BLUE_COLOR_23,BLUE_COLOR_23,BLUE_COLOR_23,BLUE_COLOR_23,BLUE_COLOR_23,BLUE_COLOR_23};
	vu8 blueColor24[8] = {BLUE_COLOR_24,BLUE_COLOR_24,BLUE_COLOR_24,BLUE_COLOR_24,BLUE_COLOR_24,BLUE_COLOR_24,BLUE_COLOR_24,BLUE_COLOR_24};
	vu8 blueColor25[8] = {BLUE_COLOR_25,BLUE_COLOR_25,BLUE_COLOR_25,BLUE_COLOR_25,BLUE_COLOR_25,BLUE_COLOR_25,BLUE_COLOR_25,BLUE_COLOR_25};
	vu8 blueColor26[8] = {BLUE_COLOR_26,BLUE_COLOR_26,BLUE_COLOR_26,BLUE_COLOR_26,BLUE_COLOR_26,BLUE_COLOR_26,BLUE_COLOR_26,BLUE_COLOR_26};
	vu8 blueColor27[8] = {BLUE_COLOR_27,BLUE_COLOR_27,BLUE_COLOR_27,BLUE_COLOR_27,BLUE_COLOR_27,BLUE_COLOR_27,BLUE_COLOR_27,BLUE_COLOR_27};
	vu8 blueColor28[8] = {BLUE_COLOR_28,BLUE_COLOR_28,BLUE_COLOR_28,BLUE_COLOR_28,BLUE_COLOR_28,BLUE_COLOR_28,BLUE_COLOR_28,BLUE_COLOR_28};
	vu8 blueColor29[8] = {BLUE_COLOR_29,BLUE_COLOR_29,BLUE_COLOR_29,BLUE_COLOR_29,BLUE_COLOR_29,BLUE_COLOR_29,BLUE_COLOR_29,BLUE_COLOR_29};
	vu8 blueColor30[8] = {BLUE_COLOR_30,BLUE_COLOR_30,BLUE_COLOR_30,BLUE_COLOR_30,BLUE_COLOR_30,BLUE_COLOR_30,BLUE_COLOR_30,BLUE_COLOR_30};
	vu8 blueColor31[8] = {BLUE_COLOR_31,BLUE_COLOR_31,BLUE_COLOR_31,BLUE_COLOR_31,BLUE_COLOR_31,BLUE_COLOR_31,BLUE_COLOR_31,BLUE_COLOR_31};

	vu8 greenColor1[8] = {GREEN_COLOR_1,GREEN_COLOR_1,GREEN_COLOR_1,GREEN_COLOR_1,GREEN_COLOR_1,GREEN_COLOR_1,GREEN_COLOR_1,GREEN_COLOR_1};
	vu8 greenColor2[8] = {GREEN_COLOR_2,GREEN_COLOR_2,GREEN_COLOR_2,GREEN_COLOR_2,GREEN_COLOR_2,GREEN_COLOR_2,GREEN_COLOR_2,GREEN_COLOR_2};
	vu8 greenColor3[8] = {GREEN_COLOR_3,GREEN_COLOR_3,GREEN_COLOR_3,GREEN_COLOR_3,GREEN_COLOR_3,GREEN_COLOR_3,GREEN_COLOR_3,GREEN_COLOR_3};
	vu8 greenColor4[8] = {GREEN_COLOR_4,GREEN_COLOR_4,GREEN_COLOR_4,GREEN_COLOR_4,GREEN_COLOR_4,GREEN_COLOR_4,GREEN_COLOR_4,GREEN_COLOR_4};
	vu8 greenColor5[8] = {GREEN_COLOR_5,GREEN_COLOR_5,GREEN_COLOR_5,GREEN_COLOR_5,GREEN_COLOR_5,GREEN_COLOR_5,GREEN_COLOR_5,GREEN_COLOR_5};
	vu8 greenColor6[8] = {GREEN_COLOR_6,GREEN_COLOR_6,GREEN_COLOR_6,GREEN_COLOR_6,GREEN_COLOR_6,GREEN_COLOR_6,GREEN_COLOR_6,GREEN_COLOR_6};
	vu8 greenColor7[8] = {GREEN_COLOR_7,GREEN_COLOR_7,GREEN_COLOR_7,GREEN_COLOR_7,GREEN_COLOR_7,GREEN_COLOR_7,GREEN_COLOR_7,GREEN_COLOR_7};
	vu8 greenColor8[8] = {GREEN_COLOR_8,GREEN_COLOR_8,GREEN_COLOR_8,GREEN_COLOR_8,GREEN_COLOR_8,GREEN_COLOR_8,GREEN_COLOR_8,GREEN_COLOR_8};
	vu8 greenColor9[8] = {GREEN_COLOR_9,GREEN_COLOR_9,GREEN_COLOR_9,GREEN_COLOR_9,GREEN_COLOR_9,GREEN_COLOR_9,GREEN_COLOR_9,GREEN_COLOR_9};
	vu8 greenColor10[8] = {GREEN_COLOR_10,GREEN_COLOR_10,GREEN_COLOR_10,GREEN_COLOR_10,GREEN_COLOR_10,GREEN_COLOR_10,GREEN_COLOR_10,GREEN_COLOR_10};
	vu8 greenColor11[8] = {GREEN_COLOR_11,GREEN_COLOR_11,GREEN_COLOR_11,GREEN_COLOR_11,GREEN_COLOR_11,GREEN_COLOR_11,GREEN_COLOR_11,GREEN_COLOR_11};
	vu8 greenColor12[8] = {GREEN_COLOR_12,GREEN_COLOR_12,GREEN_COLOR_12,GREEN_COLOR_12,GREEN_COLOR_12,GREEN_COLOR_12,GREEN_COLOR_12,GREEN_COLOR_12};
	vu8 greenColor13[8] = {GREEN_COLOR_13,GREEN_COLOR_13,GREEN_COLOR_13,GREEN_COLOR_13,GREEN_COLOR_13,GREEN_COLOR_13,GREEN_COLOR_13,GREEN_COLOR_13};
	vu8 greenColor14[8] = {GREEN_COLOR_14,GREEN_COLOR_14,GREEN_COLOR_14,GREEN_COLOR_14,GREEN_COLOR_14,GREEN_COLOR_14,GREEN_COLOR_14,GREEN_COLOR_14};
	vu8 greenColor15[8] = {GREEN_COLOR_15,GREEN_COLOR_15,GREEN_COLOR_15,GREEN_COLOR_15,GREEN_COLOR_15,GREEN_COLOR_15,GREEN_COLOR_15,GREEN_COLOR_15};
	vu8 greenColor16[8] = {GREEN_COLOR_16,GREEN_COLOR_16,GREEN_COLOR_16,GREEN_COLOR_16,GREEN_COLOR_16,GREEN_COLOR_16,GREEN_COLOR_16,GREEN_COLOR_16};
	vu8 greenColor17[8] = {GREEN_COLOR_17,GREEN_COLOR_17,GREEN_COLOR_17,GREEN_COLOR_17,GREEN_COLOR_17,GREEN_COLOR_17,GREEN_COLOR_17,GREEN_COLOR_17};
	vu8 greenColor18[8] = {GREEN_COLOR_18,GREEN_COLOR_18,GREEN_COLOR_18,GREEN_COLOR_18,GREEN_COLOR_18,GREEN_COLOR_18,GREEN_COLOR_18,GREEN_COLOR_18};
	vu8 greenColor19[8] = {GREEN_COLOR_19,GREEN_COLOR_19,GREEN_COLOR_19,GREEN_COLOR_19,GREEN_COLOR_19,GREEN_COLOR_19,GREEN_COLOR_19,GREEN_COLOR_19};
	vu8 greenColor20[8] = {GREEN_COLOR_20,GREEN_COLOR_20,GREEN_COLOR_20,GREEN_COLOR_20,GREEN_COLOR_20,GREEN_COLOR_20,GREEN_COLOR_20,GREEN_COLOR_20};
	vu8 greenColor21[8] = {GREEN_COLOR_21,GREEN_COLOR_21,GREEN_COLOR_21,GREEN_COLOR_21,GREEN_COLOR_21,GREEN_COLOR_21,GREEN_COLOR_21,GREEN_COLOR_21};
	vu8 greenColor22[8] = {GREEN_COLOR_22,GREEN_COLOR_22,GREEN_COLOR_22,GREEN_COLOR_22,GREEN_COLOR_22,GREEN_COLOR_22,GREEN_COLOR_22,GREEN_COLOR_22};
	vu8 greenColor23[8] = {GREEN_COLOR_23,GREEN_COLOR_23,GREEN_COLOR_23,GREEN_COLOR_23,GREEN_COLOR_23,GREEN_COLOR_23,GREEN_COLOR_23,GREEN_COLOR_23};
	vu8 greenColor24[8] = {GREEN_COLOR_24,GREEN_COLOR_24,GREEN_COLOR_24,GREEN_COLOR_24,GREEN_COLOR_24,GREEN_COLOR_24,GREEN_COLOR_24,GREEN_COLOR_24};
	vu8 greenColor25[8] = {GREEN_COLOR_25,GREEN_COLOR_25,GREEN_COLOR_25,GREEN_COLOR_25,GREEN_COLOR_25,GREEN_COLOR_25,GREEN_COLOR_25,GREEN_COLOR_25};
	vu8 greenColor26[8] = {GREEN_COLOR_26,GREEN_COLOR_26,GREEN_COLOR_26,GREEN_COLOR_26,GREEN_COLOR_26,GREEN_COLOR_26,GREEN_COLOR_26,GREEN_COLOR_26};
	vu8 greenColor27[8] = {GREEN_COLOR_27,GREEN_COLOR_27,GREEN_COLOR_27,GREEN_COLOR_27,GREEN_COLOR_27,GREEN_COLOR_27,GREEN_COLOR_27,GREEN_COLOR_27};
	vu8 greenColor28[8] = {GREEN_COLOR_28,GREEN_COLOR_28,GREEN_COLOR_28,GREEN_COLOR_28,GREEN_COLOR_28,GREEN_COLOR_28,GREEN_COLOR_28,GREEN_COLOR_28};
	vu8 greenColor29[8] = {GREEN_COLOR_29,GREEN_COLOR_29,GREEN_COLOR_29,GREEN_COLOR_29,GREEN_COLOR_29,GREEN_COLOR_29,GREEN_COLOR_29,GREEN_COLOR_29};
	vu8 greenColor30[8] = {GREEN_COLOR_30,GREEN_COLOR_30,GREEN_COLOR_30,GREEN_COLOR_30,GREEN_COLOR_30,GREEN_COLOR_30,GREEN_COLOR_30,GREEN_COLOR_30};
	vu8 greenColor31[8] = {GREEN_COLOR_31,GREEN_COLOR_31,GREEN_COLOR_31,GREEN_COLOR_31,GREEN_COLOR_31,GREEN_COLOR_31,GREEN_COLOR_31,GREEN_COLOR_31};

	vu8 redColor1[8] = {RED_COLOR_1,RED_COLOR_1,RED_COLOR_1,RED_COLOR_1,RED_COLOR_1,RED_COLOR_1,RED_COLOR_1,RED_COLOR_1};
	vu8 redColor2[8] = {RED_COLOR_2,RED_COLOR_2,RED_COLOR_2,RED_COLOR_2,RED_COLOR_2,RED_COLOR_2,RED_COLOR_2,RED_COLOR_2};
	vu8 redColor3[8] = {RED_COLOR_3,RED_COLOR_3,RED_COLOR_3,RED_COLOR_3,RED_COLOR_3,RED_COLOR_3,RED_COLOR_3,RED_COLOR_3};
	vu8 redColor4[8] = {RED_COLOR_4,RED_COLOR_4,RED_COLOR_4,RED_COLOR_4,RED_COLOR_4,RED_COLOR_4,RED_COLOR_4,RED_COLOR_4};
	vu8 redColor5[8] = {RED_COLOR_5,RED_COLOR_5,RED_COLOR_5,RED_COLOR_5,RED_COLOR_5,RED_COLOR_5,RED_COLOR_5,RED_COLOR_5};
	vu8 redColor6[8] = {RED_COLOR_6,RED_COLOR_6,RED_COLOR_6,RED_COLOR_6,RED_COLOR_6,RED_COLOR_6,RED_COLOR_6,RED_COLOR_6};
	vu8 redColor7[8] = {RED_COLOR_7,RED_COLOR_7,RED_COLOR_7,RED_COLOR_7,RED_COLOR_7,RED_COLOR_7,RED_COLOR_7,RED_COLOR_7};
	vu8 redColor8[8] = {RED_COLOR_8,RED_COLOR_8,RED_COLOR_8,RED_COLOR_8,RED_COLOR_8,RED_COLOR_8,RED_COLOR_8,RED_COLOR_8};
	vu8 redColor9[8] = {RED_COLOR_9,RED_COLOR_9,RED_COLOR_9,RED_COLOR_9,RED_COLOR_9,RED_COLOR_9,RED_COLOR_9,RED_COLOR_9};
	vu8 redColor10[8] = {RED_COLOR_10,RED_COLOR_10,RED_COLOR_10,RED_COLOR_10,RED_COLOR_10,RED_COLOR_10,RED_COLOR_10,RED_COLOR_10};
	vu8 redColor11[8] = {RED_COLOR_11,RED_COLOR_11,RED_COLOR_11,RED_COLOR_11,RED_COLOR_11,RED_COLOR_11,RED_COLOR_11,RED_COLOR_11};
	vu8 redColor12[8] = {RED_COLOR_12,RED_COLOR_12,RED_COLOR_12,RED_COLOR_12,RED_COLOR_12,RED_COLOR_12,RED_COLOR_12,RED_COLOR_12};
	vu8 redColor13[8] = {RED_COLOR_13,RED_COLOR_13,RED_COLOR_13,RED_COLOR_13,RED_COLOR_13,RED_COLOR_13,RED_COLOR_13,RED_COLOR_13};
	vu8 redColor14[8] = {RED_COLOR_14,RED_COLOR_14,RED_COLOR_14,RED_COLOR_14,RED_COLOR_14,RED_COLOR_14,RED_COLOR_14,RED_COLOR_14};
	vu8 redColor15[8] = {RED_COLOR_15,RED_COLOR_15,RED_COLOR_15,RED_COLOR_15,RED_COLOR_15,RED_COLOR_15,RED_COLOR_15,RED_COLOR_15};
	vu8 redColor16[8] = {RED_COLOR_16,RED_COLOR_16,RED_COLOR_16,RED_COLOR_16,RED_COLOR_16,RED_COLOR_16,RED_COLOR_16,RED_COLOR_16};
	vu8 redColor17[8] = {RED_COLOR_17,RED_COLOR_17,RED_COLOR_17,RED_COLOR_17,RED_COLOR_17,RED_COLOR_17,RED_COLOR_17,RED_COLOR_17};
	vu8 redColor18[8] = {RED_COLOR_18,RED_COLOR_18,RED_COLOR_18,RED_COLOR_18,RED_COLOR_18,RED_COLOR_18,RED_COLOR_18,RED_COLOR_18};
	vu8 redColor19[8] = {RED_COLOR_19,RED_COLOR_19,RED_COLOR_19,RED_COLOR_19,RED_COLOR_19,RED_COLOR_19,RED_COLOR_19,RED_COLOR_19};
	vu8 redColor20[8] = {RED_COLOR_20,RED_COLOR_20,RED_COLOR_20,RED_COLOR_20,RED_COLOR_20,RED_COLOR_20,RED_COLOR_20,RED_COLOR_20};
	vu8 redColor21[8] = {RED_COLOR_21,RED_COLOR_21,RED_COLOR_21,RED_COLOR_21,RED_COLOR_21,RED_COLOR_21,RED_COLOR_21,RED_COLOR_21};
	vu8 redColor22[8] = {RED_COLOR_22,RED_COLOR_22,RED_COLOR_22,RED_COLOR_22,RED_COLOR_22,RED_COLOR_22,RED_COLOR_22,RED_COLOR_22};
	vu8 redColor23[8] = {RED_COLOR_23,RED_COLOR_23,RED_COLOR_23,RED_COLOR_23,RED_COLOR_23,RED_COLOR_23,RED_COLOR_23,RED_COLOR_23};
	vu8 redColor24[8] = {RED_COLOR_24,RED_COLOR_24,RED_COLOR_24,RED_COLOR_24,RED_COLOR_24,RED_COLOR_24,RED_COLOR_24,RED_COLOR_24};
	vu8 redColor25[8] = {RED_COLOR_25,RED_COLOR_25,RED_COLOR_25,RED_COLOR_25,RED_COLOR_25,RED_COLOR_25,RED_COLOR_25,RED_COLOR_25};
	vu8 redColor26[8] = {RED_COLOR_26,RED_COLOR_26,RED_COLOR_26,RED_COLOR_26,RED_COLOR_26,RED_COLOR_26,RED_COLOR_26,RED_COLOR_26};
	vu8 redColor27[8] = {RED_COLOR_27,RED_COLOR_27,RED_COLOR_27,RED_COLOR_27,RED_COLOR_27,RED_COLOR_27,RED_COLOR_27,RED_COLOR_27};
	vu8 redColor28[8] = {RED_COLOR_28,RED_COLOR_28,RED_COLOR_28,RED_COLOR_28,RED_COLOR_28,RED_COLOR_28,RED_COLOR_28,RED_COLOR_28};
	vu8 redColor29[8] = {RED_COLOR_29,RED_COLOR_29,RED_COLOR_29,RED_COLOR_29,RED_COLOR_29,RED_COLOR_29,RED_COLOR_29,RED_COLOR_29};
	vu8 redColor30[8] = {RED_COLOR_30,RED_COLOR_30,RED_COLOR_30,RED_COLOR_30,RED_COLOR_30,RED_COLOR_30,RED_COLOR_30,RED_COLOR_30};
	vu8 redColor31[8] = {RED_COLOR_31,RED_COLOR_31,RED_COLOR_31,RED_COLOR_31,RED_COLOR_31,RED_COLOR_31,RED_COLOR_31,RED_COLOR_31};

	Hw32xSetFGColor(RED_COLOR_1,1,0,0);
	Hw32xSetFGColor(RED_COLOR_2,2,0,0);
	Hw32xSetFGColor(RED_COLOR_3,3,0,0);
	Hw32xSetFGColor(RED_COLOR_4,4,0,0);
	Hw32xSetFGColor(RED_COLOR_5,5,0,0);
	Hw32xSetFGColor(RED_COLOR_6,6,0,0);
	Hw32xSetFGColor(RED_COLOR_7,7,0,0);
	Hw32xSetFGColor(RED_COLOR_8,8,0,0);
	Hw32xSetFGColor(RED_COLOR_9,9,0,0);
	Hw32xSetFGColor(RED_COLOR_10,10,0,0);
	Hw32xSetFGColor(RED_COLOR_11,11,0,0);
	Hw32xSetFGColor(RED_COLOR_12,12,0,0);
	Hw32xSetFGColor(RED_COLOR_13,13,0,0);
	Hw32xSetFGColor(RED_COLOR_14,14,0,0);
	Hw32xSetFGColor(RED_COLOR_15,15,0,0);
	Hw32xSetFGColor(RED_COLOR_16,16,0,0);
	Hw32xSetFGColor(RED_COLOR_17,17,0,0);
	Hw32xSetFGColor(RED_COLOR_18,18,0,0);
	Hw32xSetFGColor(RED_COLOR_19,19,0,0);
	Hw32xSetFGColor(RED_COLOR_20,20,0,0);
	Hw32xSetFGColor(RED_COLOR_21,21,0,0);
	Hw32xSetFGColor(RED_COLOR_22,22,0,0);
	Hw32xSetFGColor(RED_COLOR_23,23,0,0);
	Hw32xSetFGColor(RED_COLOR_24,24,0,0);
	Hw32xSetFGColor(RED_COLOR_25,25,0,0);
	Hw32xSetFGColor(RED_COLOR_26,26,0,0);
	Hw32xSetFGColor(RED_COLOR_27,27,0,0);
	Hw32xSetFGColor(RED_COLOR_28,28,0,0);
	Hw32xSetFGColor(RED_COLOR_29,29,0,0);
	Hw32xSetFGColor(RED_COLOR_30,30,0,0);
	Hw32xSetFGColor(RED_COLOR_31,31,0,0);

	Hw32xSetFGColor(GREEN_COLOR_1,0,1,0);
	Hw32xSetFGColor(GREEN_COLOR_2,0,2,0);
	Hw32xSetFGColor(GREEN_COLOR_3,0,3,0);
	Hw32xSetFGColor(GREEN_COLOR_4,0,4,0);
	Hw32xSetFGColor(GREEN_COLOR_5,0,5,0);
	Hw32xSetFGColor(GREEN_COLOR_6,0,6,0);
	Hw32xSetFGColor(GREEN_COLOR_7,0,7,0);
	Hw32xSetFGColor(GREEN_COLOR_8,0,8,0);
	Hw32xSetFGColor(GREEN_COLOR_9,0,9,0);
	Hw32xSetFGColor(GREEN_COLOR_10,0,10,0);
	Hw32xSetFGColor(GREEN_COLOR_11,0,11,0);
	Hw32xSetFGColor(GREEN_COLOR_12,0,12,0);
	Hw32xSetFGColor(GREEN_COLOR_13,0,13,0);
	Hw32xSetFGColor(GREEN_COLOR_14,0,14,0);
	Hw32xSetFGColor(GREEN_COLOR_15,0,15,0);
	Hw32xSetFGColor(GREEN_COLOR_16,0,16,0);
	Hw32xSetFGColor(GREEN_COLOR_17,0,17,0);
	Hw32xSetFGColor(GREEN_COLOR_18,0,18,0);
	Hw32xSetFGColor(GREEN_COLOR_19,0,19,0);
	Hw32xSetFGColor(GREEN_COLOR_20,0,20,0);
	Hw32xSetFGColor(GREEN_COLOR_21,0,21,0);
	Hw32xSetFGColor(GREEN_COLOR_22,0,22,0);
	Hw32xSetFGColor(GREEN_COLOR_23,0,23,0);
	Hw32xSetFGColor(GREEN_COLOR_24,0,24,0);
	Hw32xSetFGColor(GREEN_COLOR_25,0,25,0);
	Hw32xSetFGColor(GREEN_COLOR_26,0,26,0);
	Hw32xSetFGColor(GREEN_COLOR_27,0,27,0);
	Hw32xSetFGColor(GREEN_COLOR_28,0,28,0);
	Hw32xSetFGColor(GREEN_COLOR_29,0,29,0);
	Hw32xSetFGColor(GREEN_COLOR_30,0,30,0);
	Hw32xSetFGColor(GREEN_COLOR_31,0,31,0);

	Hw32xSetFGColor(BLUE_COLOR_1,0,0,1);
	Hw32xSetFGColor(BLUE_COLOR_2,0,0,2);
	Hw32xSetFGColor(BLUE_COLOR_3,0,0,3);
	Hw32xSetFGColor(BLUE_COLOR_4,0,0,4);
	Hw32xSetFGColor(BLUE_COLOR_5,0,0,5);
	Hw32xSetFGColor(BLUE_COLOR_6,0,0,6);
	Hw32xSetFGColor(BLUE_COLOR_7,0,0,7);
	Hw32xSetFGColor(BLUE_COLOR_8,0,0,8);
	Hw32xSetFGColor(BLUE_COLOR_9,0,0,9);
	Hw32xSetFGColor(BLUE_COLOR_10,0,0,10);
	Hw32xSetFGColor(BLUE_COLOR_11,0,0,11);
	Hw32xSetFGColor(BLUE_COLOR_12,0,0,12);
	Hw32xSetFGColor(BLUE_COLOR_13,0,0,13);
	Hw32xSetFGColor(BLUE_COLOR_14,0,0,14);
	Hw32xSetFGColor(BLUE_COLOR_15,0,0,15);
	Hw32xSetFGColor(BLUE_COLOR_16,0,0,16);
	Hw32xSetFGColor(BLUE_COLOR_17,0,0,17);
	Hw32xSetFGColor(BLUE_COLOR_18,0,0,18);
	Hw32xSetFGColor(BLUE_COLOR_19,0,0,19);
	Hw32xSetFGColor(BLUE_COLOR_20,0,0,20);
	Hw32xSetFGColor(BLUE_COLOR_21,0,0,21);
	Hw32xSetFGColor(BLUE_COLOR_22,0,0,22);
	Hw32xSetFGColor(BLUE_COLOR_23,0,0,23);
	Hw32xSetFGColor(BLUE_COLOR_24,0,0,24);
	Hw32xSetFGColor(BLUE_COLOR_25,0,0,25);
	Hw32xSetFGColor(BLUE_COLOR_26,0,0,26);
	Hw32xSetFGColor(BLUE_COLOR_27,0,0,27);
	Hw32xSetFGColor(BLUE_COLOR_28,0,0,28);
	Hw32xSetFGColor(BLUE_COLOR_29,0,0,29);
	Hw32xSetFGColor(BLUE_COLOR_30,0,0,30);
	Hw32xSetFGColor(BLUE_COLOR_31,0,0,31);

	Hw32xSetFGColor(WHITE_COLOR_1,1,1,1);
	Hw32xSetFGColor(WHITE_COLOR_2,2,2,2);
	Hw32xSetFGColor(WHITE_COLOR_3,3,3,3);
	Hw32xSetFGColor(WHITE_COLOR_4,4,4,4);
	Hw32xSetFGColor(WHITE_COLOR_5,5,5,5);
	Hw32xSetFGColor(WHITE_COLOR_6,6,6,6);
	Hw32xSetFGColor(WHITE_COLOR_7,7,7,7);
	Hw32xSetFGColor(WHITE_COLOR_8,8,8,8);
	Hw32xSetFGColor(WHITE_COLOR_9,9,9,9);
	Hw32xSetFGColor(WHITE_COLOR_10,10,10,10);
	Hw32xSetFGColor(WHITE_COLOR_11,11,11,11);
	Hw32xSetFGColor(WHITE_COLOR_12,12,12,12);
	Hw32xSetFGColor(WHITE_COLOR_13,13,13,13);
	Hw32xSetFGColor(WHITE_COLOR_14,14,14,14);
	Hw32xSetFGColor(WHITE_COLOR_15,15,15,15);
	Hw32xSetFGColor(WHITE_COLOR_16,16,16,16);
	Hw32xSetFGColor(WHITE_COLOR_17,17,17,17);
	Hw32xSetFGColor(WHITE_COLOR_18,18,18,18);
	Hw32xSetFGColor(WHITE_COLOR_19,19,19,19);
	Hw32xSetFGColor(WHITE_COLOR_20,20,20,20);
	Hw32xSetFGColor(WHITE_COLOR_21,21,21,21);
	Hw32xSetFGColor(WHITE_COLOR_22,22,22,22);
	Hw32xSetFGColor(WHITE_COLOR_23,23,23,23);
	Hw32xSetFGColor(WHITE_COLOR_24,24,24,24);
	Hw32xSetFGColor(WHITE_COLOR_25,25,25,25);
	Hw32xSetFGColor(WHITE_COLOR_26,26,26,26);
	Hw32xSetFGColor(WHITE_COLOR_27,27,27,27);
	Hw32xSetFGColor(WHITE_COLOR_28,28,28,28);
	Hw32xSetFGColor(WHITE_COLOR_29,29,29,29);
	Hw32xSetFGColor(WHITE_COLOR_30,30,30,30);
	Hw32xSetFGColor(WHITE_COLOR_31,31,31,31);

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS; 
	
	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done)
	{
		button = MARS_SYS_COMM8;
		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

		pressedButton = button & ~oldButton;
    	oldButton = button;

		if (pressedButton & SEGA_CTRL_B)
		{
			done = 1;
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_COLORS);
			tp_colorchart();
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		myScreenPrintData("0", 56, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("1", 72, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("2", 88, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("3", 104, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("4", 120, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("5", 136, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("6", 152, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("7", 168, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("8", 184, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("9", 200, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("A", 216, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("B", 232, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("C", 248, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("D", 264, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("E", 280, 28, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("F", 296, 28, (vu8*)&redColor31, (vu8*)&blueColor1);

		myScreenPrintData("RED", 34, 36, (vu8*)&redColor31, (vu8*)&blueColor1);
		myScreenPrintData("GREEN", 20, 76, (vu8*)&greenColor31, (vu8*)&blueColor1);
		myScreenPrintData("BLUE", 25, 116, (vu8*)&blueColor31, (vu8*)&blueColor1);
		myScreenPrintData("WHITE", 20, 156, (vu8*)&whiteColor31, (vu8*)&blueColor1);

		drawFillRect(56,36,8,32,(vu8*)&redColor1); //Red
		drawFillRect(64,36,8,32,(vu8*)&redColor2); //Red
		drawFillRect(72,36,8,32,(vu8*)&redColor3); //Red
		drawFillRect(80,36,8,32,(vu8*)&redColor4); //Red
		drawFillRect(88,36,8,32,(vu8*)&redColor5); //Red
		drawFillRect(96,36,8,32,(vu8*)&redColor6); //Red
		drawFillRect(104,36,8,32,(vu8*)&redColor7); //Red
		drawFillRect(112,36,8,32,(vu8*)&redColor8); //Red
		drawFillRect(120,36,8,32,(vu8*)&redColor9); //Red
		drawFillRect(128,36,8,32,(vu8*)&redColor10); //Red
		drawFillRect(136,36,8,32,(vu8*)&redColor11); //Red
		drawFillRect(144,36,8,32,(vu8*)&redColor12); //Red
		drawFillRect(152,36,8,32,(vu8*)&redColor13); //Red
		drawFillRect(160,36,8,32,(vu8*)&redColor14); //Red
		drawFillRect(168,36,8,32,(vu8*)&redColor15); //Red
		drawFillRect(176,36,8,32,(vu8*)&redColor16); //Red
		drawFillRect(184,36,8,32,(vu8*)&redColor17); //Red
		drawFillRect(192,36,8,32,(vu8*)&redColor18); //Red
		drawFillRect(200,36,8,32,(vu8*)&redColor19); //Red
		drawFillRect(208,36,8,32,(vu8*)&redColor20); //Red
		drawFillRect(216,36,8,32,(vu8*)&redColor21); //Red
		drawFillRect(224,36,8,32,(vu8*)&redColor22); //Red
		drawFillRect(232,36,8,32,(vu8*)&redColor23); //Red
		drawFillRect(240,36,8,32,(vu8*)&redColor24); //Red
		drawFillRect(248,36,8,32,(vu8*)&redColor25); //Red
		drawFillRect(256,36,8,32,(vu8*)&redColor26); //Red
		drawFillRect(264,36,8,32,(vu8*)&redColor27); //Red
		drawFillRect(272,36,8,32,(vu8*)&redColor28); //Red
		drawFillRect(280,36,8,32,(vu8*)&redColor29); //Red
		drawFillRect(288,36,8,32,(vu8*)&redColor30); //Red
		drawFillRect(296,36,8,32,(vu8*)&redColor31); //Red

		drawFillRect(56,76,8,32,(vu8*)&greenColor1); //Green
		drawFillRect(64,76,8,32,(vu8*)&greenColor2); //Green
		drawFillRect(72,76,8,32,(vu8*)&greenColor3); //Green
		drawFillRect(80,76,8,32,(vu8*)&greenColor4); //Green
		drawFillRect(88,76,8,32,(vu8*)&greenColor5); //Green
		drawFillRect(96,76,8,32,(vu8*)&greenColor6); //Green
		drawFillRect(104,76,8,32,(vu8*)&greenColor7); //Green
		drawFillRect(112,76,8,32,(vu8*)&greenColor8); //Green
		drawFillRect(120,76,8,32,(vu8*)&greenColor9); //Green
		drawFillRect(128,76,8,32,(vu8*)&greenColor10); //Green
		drawFillRect(136,76,8,32,(vu8*)&greenColor11); //Green
		drawFillRect(144,76,8,32,(vu8*)&greenColor12); //Green
		drawFillRect(152,76,8,32,(vu8*)&greenColor13); //Green
		drawFillRect(160,76,8,32,(vu8*)&greenColor14); //Green
		drawFillRect(168,76,8,32,(vu8*)&greenColor15); //Green
		drawFillRect(176,76,8,32,(vu8*)&greenColor16); //Green
		drawFillRect(184,76,8,32,(vu8*)&greenColor17); //Green
		drawFillRect(192,76,8,32,(vu8*)&greenColor18); //Green
		drawFillRect(200,76,8,32,(vu8*)&greenColor19); //Green
		drawFillRect(208,76,8,32,(vu8*)&greenColor20); //Green
		drawFillRect(216,76,8,32,(vu8*)&greenColor21); //Green
		drawFillRect(224,76,8,32,(vu8*)&greenColor22); //Green
		drawFillRect(232,76,8,32,(vu8*)&greenColor23); //Green
		drawFillRect(240,76,8,32,(vu8*)&greenColor24); //Green
		drawFillRect(248,76,8,32,(vu8*)&greenColor25); //Green
		drawFillRect(256,76,8,32,(vu8*)&greenColor26); //Green
		drawFillRect(264,76,8,32,(vu8*)&greenColor27); //Green
		drawFillRect(272,76,8,32,(vu8*)&greenColor28); //Green
		drawFillRect(280,76,8,32,(vu8*)&greenColor29); //Green
		drawFillRect(288,76,8,32,(vu8*)&greenColor30); //Green
		drawFillRect(296,76,8,32,(vu8*)&greenColor31); //Green

		drawFillRect(56,116,8,32,(vu8*)&blueColor1); //Blue
		drawFillRect(64,116,8,32,(vu8*)&blueColor2); //Blue
		drawFillRect(72,116,8,32,(vu8*)&blueColor3); //Blue
		drawFillRect(80,116,8,32,(vu8*)&blueColor4); //Blue
		drawFillRect(88,116,8,32,(vu8*)&blueColor5); //Blue
		drawFillRect(96,116,8,32,(vu8*)&blueColor6); //Blue
		drawFillRect(104,116,8,32,(vu8*)&blueColor7); //Blue
		drawFillRect(112,116,8,32,(vu8*)&blueColor8); //Blue
		drawFillRect(120,116,8,32,(vu8*)&blueColor9); //Blue
		drawFillRect(128,116,8,32,(vu8*)&blueColor10); //Blue
		drawFillRect(136,116,8,32,(vu8*)&blueColor11); //Blue
		drawFillRect(144,116,8,32,(vu8*)&blueColor12); //Blue
		drawFillRect(152,116,8,32,(vu8*)&blueColor13); //Blue
		drawFillRect(160,116,8,32,(vu8*)&blueColor14); //Blue
		drawFillRect(168,116,8,32,(vu8*)&blueColor15); //Blue
		drawFillRect(176,116,8,32,(vu8*)&blueColor16); //Blue
		drawFillRect(184,116,8,32,(vu8*)&blueColor17); //Blue
		drawFillRect(192,116,8,32,(vu8*)&blueColor18); //Blue
		drawFillRect(200,116,8,32,(vu8*)&blueColor19); //Blue
		drawFillRect(208,116,8,32,(vu8*)&blueColor20); //Blue
		drawFillRect(216,116,8,32,(vu8*)&blueColor21); //Blue
		drawFillRect(224,116,8,32,(vu8*)&blueColor22); //Blue
		drawFillRect(232,116,8,32,(vu8*)&blueColor23); //Blue
		drawFillRect(240,116,8,32,(vu8*)&blueColor24); //Blue
		drawFillRect(248,116,8,32,(vu8*)&blueColor25); //Blue
		drawFillRect(256,116,8,32,(vu8*)&blueColor26); //Blue
		drawFillRect(264,116,8,32,(vu8*)&blueColor27); //Blue
		drawFillRect(272,116,8,32,(vu8*)&blueColor28); //Blue
		drawFillRect(280,116,8,32,(vu8*)&blueColor29); //Blue
		drawFillRect(288,116,8,32,(vu8*)&blueColor30); //Blue
		drawFillRect(296,116,8,32,(vu8*)&blueColor31); //Blue

		drawFillRect(56,156,8,32,(vu8*)&whiteColor1); //White
		drawFillRect(64,156,8,32,(vu8*)&whiteColor2); //White
		drawFillRect(72,156,8,32,(vu8*)&whiteColor3); //White
		drawFillRect(80,156,8,32,(vu8*)&whiteColor4); //White
		drawFillRect(88,156,8,32,(vu8*)&whiteColor5); //White
		drawFillRect(96,156,8,32,(vu8*)&whiteColor6); //White
		drawFillRect(104,156,8,32,(vu8*)&whiteColor7); //White
		drawFillRect(112,156,8,32,(vu8*)&whiteColor8); //White
		drawFillRect(120,156,8,32,(vu8*)&whiteColor9); //White
		drawFillRect(128,156,8,32,(vu8*)&whiteColor10); //White
		drawFillRect(136,156,8,32,(vu8*)&whiteColor11); //White
		drawFillRect(144,156,8,32,(vu8*)&whiteColor12); //White
		drawFillRect(152,156,8,32,(vu8*)&whiteColor13); //White
		drawFillRect(160,156,8,32,(vu8*)&whiteColor14); //White
		drawFillRect(168,156,8,32,(vu8*)&whiteColor15); //White
		drawFillRect(176,156,8,32,(vu8*)&whiteColor16); //White
		drawFillRect(184,156,8,32,(vu8*)&whiteColor17); //White
		drawFillRect(192,156,8,32,(vu8*)&whiteColor18); //White
		drawFillRect(200,156,8,32,(vu8*)&whiteColor19); //White
		drawFillRect(208,156,8,32,(vu8*)&whiteColor20); //White
		drawFillRect(216,156,8,32,(vu8*)&whiteColor21); //White
		drawFillRect(224,156,8,32,(vu8*)&whiteColor22); //White
		drawFillRect(232,156,8,32,(vu8*)&whiteColor23); //White
		drawFillRect(240,156,8,32,(vu8*)&whiteColor24); //White
		drawFillRect(248,156,8,32,(vu8*)&whiteColor25); //White
		drawFillRect(256,156,8,32,(vu8*)&whiteColor26); //White
		drawFillRect(264,156,8,32,(vu8*)&whiteColor27); //White
		drawFillRect(272,156,8,32,(vu8*)&whiteColor28); //White
		drawFillRect(280,156,8,32,(vu8*)&whiteColor29); //White
		drawFillRect(288,156,8,32,(vu8*)&whiteColor30); //White
		drawFillRect(296,156,8,32,(vu8*)&whiteColor31); //White

		MARS_SYS_COMM6 = 1;

		drawLineTable(4);

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		Hw32xDelay(frameDelay);
	}
	return;
}

void tp_colorbars()
{
	u16 done = 0;
	int frameDelay = 5;
	u16 button, pressedButton, oldButton = 0xFFFF;
	MARS_SYS_COMM6 = 0;

	vu8 blockColor[8] = {BLOCK_COLOR_1,BLOCK_COLOR_1,BLOCK_COLOR_1,BLOCK_COLOR_1,BLOCK_COLOR_1,BLOCK_COLOR_1,BLOCK_COLOR_1,BLOCK_COLOR_1};
	vu8 blockColor2[8] = {BLOCK_COLOR_2,BLOCK_COLOR_2,BLOCK_COLOR_2,BLOCK_COLOR_2,BLOCK_COLOR_2,BLOCK_COLOR_2,BLOCK_COLOR_2,BLOCK_COLOR_2};
	vu8 blockColor3[8] = {BLOCK_COLOR_3,BLOCK_COLOR_3,BLOCK_COLOR_3,BLOCK_COLOR_3,BLOCK_COLOR_3,BLOCK_COLOR_3,BLOCK_COLOR_3,BLOCK_COLOR_3};
	vu8 blockColor4[8] = {BLOCK_COLOR_4,BLOCK_COLOR_4,BLOCK_COLOR_4,BLOCK_COLOR_4,BLOCK_COLOR_4,BLOCK_COLOR_4,BLOCK_COLOR_4,BLOCK_COLOR_4};
	vu8 blockColor5[8] = {BLOCK_COLOR_5,BLOCK_COLOR_5,BLOCK_COLOR_5,BLOCK_COLOR_5,BLOCK_COLOR_5,BLOCK_COLOR_5,BLOCK_COLOR_5,BLOCK_COLOR_5};
	vu8 blockColor6[8] = {BLOCK_COLOR_6,BLOCK_COLOR_6,BLOCK_COLOR_6,BLOCK_COLOR_6,BLOCK_COLOR_6,BLOCK_COLOR_6,BLOCK_COLOR_6,BLOCK_COLOR_6};
	vu8 blockColor7[8] = {BLOCK_COLOR_7,BLOCK_COLOR_7,BLOCK_COLOR_7,BLOCK_COLOR_7,BLOCK_COLOR_7,BLOCK_COLOR_7,BLOCK_COLOR_7,BLOCK_COLOR_7};
	vu8 blockColor8[8] = {BLOCK_COLOR_8,BLOCK_COLOR_8,BLOCK_COLOR_8,BLOCK_COLOR_8,BLOCK_COLOR_8,BLOCK_COLOR_8,BLOCK_COLOR_8,BLOCK_COLOR_8};

	cleanup();

	Hw32xSetFGColor(BLOCK_COLOR_1,255,255,255);	// White
	Hw32xSetFGColor(BLOCK_COLOR_2,255,255,0);	// Yellow
	Hw32xSetFGColor(BLOCK_COLOR_3,0,255,255);	// Cyan
	Hw32xSetFGColor(BLOCK_COLOR_4,0,255,0);		// Green
	Hw32xSetFGColor(BLOCK_COLOR_5,255,0,255);	// Magenta
	Hw32xSetFGColor(BLOCK_COLOR_6,255,0,0);		// Red
	Hw32xSetFGColor(BLOCK_COLOR_7,0,0,255);		// Blue
	Hw32xSetFGColor(BLOCK_COLOR_8,0,0,0);		// Black

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS;

	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done)
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

		pressedButton = button & ~oldButton;
    	oldButton = button;

		if (pressedButton & SEGA_CTRL_B)
		{
			done = 1;
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_COLORS);
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		drawFillRect(0,0,40,224,(vu8*)&blockColor);		// White
	  	drawFillRect(41,0,40,224,(vu8*)&blockColor2);	// Yellow
	  	drawFillRect(81,0,40,224,(vu8*)&blockColor3);	// Cyan
		drawFillRect(121,0,40,224,(vu8*)&blockColor4);	// Green
		drawFillRect(161,0,40,224,(vu8*)&blockColor5);	// Magenta
		drawFillRect(201,0,40,224,(vu8*)&blockColor6);	// Red
		drawFillRect(241,0,40,224,(vu8*)&blockColor7);	// Blue
		drawFillRect(281,0,40,224,(vu8*)&blockColor8);	// Black

		MARS_SYS_COMM6 = 1;

		drawLineTable(4);

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		Hw32xDelay(frameDelay);
	}
	Hw32xScreenClear();
	Hw32xSetBGColor(0,0,0,0);
	Hw32xScreenClear();
	Hw32xSetBGColor(0,0,0,0);
	Hw32xSetBGColor(1,255,255,255);
	Hw32xSetFGColor(1,255,255,255);
	return;
}

void tp_smpte_color_bars()
{
	u16 done = 0;
	int frameDelay = 1;
	int pattern = 1;
	u16 button, pressedButton, oldButton = 0xFFFF;
	extern const u16 SMPTE75IRE_PALETTE_DATA[];
	extern const u16 SMPTE100IRE_PALETTE_DATA[];
	extern const u8 SMPTE100IRE_PATTERN[];
	extern const u8 TEST_SMTPE_PATTERN[];
	vu16 *cram16 = &MARS_CRAM;
	vu16 *frameBuffer16 = &MARS_FRAMEBUFFER;
	MARS_SYS_COMM6 = 0;

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS;

	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done) 
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

		pressedButton = button & ~oldButton;
    	oldButton = button;

    	switch (pattern) {
			case 1:
				for (int i = 0; i < 255; i++){
					cram16[i] = SMPTE75IRE_PALETTE_DATA[i] & 0x7FFF;
				}
			break;
				
			case 2:
				for (int i = 0; i < 255; i++){
					cram16[i] = SMPTE100IRE_PALETTE_DATA[i] & 0x7FFF;
				}
			break;
		}

    	if (pressedButton & SEGA_CTRL_B)
		{
			done = 1;
		}

		if (pressedButton & SEGA_CTRL_A)
		{
			pattern++;
	
			if(pattern > 2){
		 		pattern = 1;
			}
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_SMPTE);

			for (int i = 0; i < 255; i++){
				cram16[i] = SMPTE75IRE_PALETTE_DATA[i] & 0x7FFF;
			}
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		drawBG(SMPTE100IRE_PATTERN);

		MARS_SYS_COMM6 = 1;

		drawLineTable(4);

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		Hw32xDelay(frameDelay);
	}
	return;
}

void tp_ref_color_bars()
{
	u16 done = 0;
	int frameDelay = 5;
	u16 button, pressedButton, oldButton = 0xFFFF;
	extern const u16 COLORREF_PALETTE_DATA[];
	extern const u8 COLORREF_PATTERN[];
	vu16 *cram16 = &MARS_CRAM;
	MARS_SYS_COMM6 = 0;

	for (int i = 0; i < 255; i++){
		cram16[i] = COLORREF_PALETTE_DATA[i] & 0x7FFF;
	}

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS;

	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done)
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

		pressedButton = button & ~oldButton;
    	oldButton = button;

    	if (pressedButton & SEGA_CTRL_B)
		{
			done = 1;
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_601CB);

			for (int i = 0; i < 255; i++){
				cram16[i] = COLORREF_PALETTE_DATA[i] & 0x7FFF;
			}
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		drawBG(COLORREF_PATTERN);

		MARS_SYS_COMM6 = 1;

		drawLineTable(4);

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		Hw32xDelay(frameDelay);
	}
	return;
}

void tp_color_bleed_check()
{
	u16 done = 0;
	int frameDelay = 0;
	int background = 1;
	u16 button, pressedButton, oldButton = 0xFFFF;
	extern const u16 COLORBLEED_PALETTE_DATA[];
	extern const u8 COLORBLEED_PATTERN;
	extern const u8 COLORBLEED_CHECKERBOARD_TILE;
	vu16 *cram16 = &MARS_CRAM;
	MARS_SYS_COMM6 = 0;

	for (int i = 0; i < 255; i++){
		cram16[i] = COLORBLEED_PALETTE_DATA[i] & 0x7FFF;
	}

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS;

	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done)
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

		pressedButton = button & ~oldButton;
    	oldButton = button;

		if (pressedButton & SEGA_CTRL_A)
		{
			background++;
	
			if(background > 2){
		 		background = 1;
			}
		}

		if (pressedButton & SEGA_CTRL_B)
		{
			done = 1;
		}

		if (pressedButton & SEGA_CTRL_START)
		{
			done = 1;
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_BLEED);

			for (int i = 0; i < 255; i++){
				cram16[i] = COLORBLEED_PALETTE_DATA[i] & 0x7FFF;
			}
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		switch (background) {
				case 1:
					drawBG(&COLORBLEED_PATTERN);
				break;
				
				case 2:
					drawBG(&COLORBLEED_CHECKERBOARD_TILE);
				break;
			}

		MARS_SYS_COMM6 = 1;

		drawLineTable(4);

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		Hw32xDelay(frameDelay);
	}
	return;
}

void tp_grid()
{
	u16 done = 0;
	int frameDelay = 4;
	int pattern = 1;
	u16 button, pressedButton, oldButton = 0xFFFF;
	extern const u16 GRID_PALETTE_DATA[];
	extern const u16 GRID_GRAY_PALETTE_DATA[];
	extern const u8 GRID_PATTERN[];
	vu16 *cram16 = &MARS_CRAM;
	MARS_SYS_COMM6 = 0;

	for (int i = 0; i < 3; i++){
		cram16[i] = GRID_PALETTE_DATA[i] & 0x7FFF;
	}

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS;

	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done)
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

		pressedButton = button & ~oldButton;
    	oldButton = button;

    	switch (pattern) {
			case 1:
				for (int i = 0; i < 255; i++){
					cram16[i] = GRID_PALETTE_DATA[i] & 0x7FFF;
				}
			break;
				
			case 2:
				for (int i = 0; i < 255; i++){
					cram16[i] = GRID_GRAY_PALETTE_DATA[i] & 0x7FFF;
				}
			break;
		}

    	if (pressedButton & SEGA_CTRL_B)
		{
			done = 1;
		}

		if (pressedButton & SEGA_CTRL_A)
		{
			pattern++;
	
			if(pattern > 2){
		 		pattern = 1;
			}
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_GRID);

			for (int i = 0; i < 3; i++){
				cram16[i] = GRID_PALETTE_DATA[i] & 0x7FFF;
			}
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		drawBG(GRID_PATTERN);

		MARS_SYS_COMM6 = 1;

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		drawLineTable(4);

		Hw32xDelay(frameDelay);
	}
	return;
}

void tp_linearity()
{
	u16 done = 0;
	int frameDelay = 5;
	int pattern = 1;
	u16 button, pressedButton, oldButton = 0xFFFF;
	extern const u8 LIN_PATTERN[];
	extern const u8 LIN_GRID_PATTERN[];
	extern const u8 LIN_GRID_DOT_PATTERN[];	
	vu16 *cram16 = &MARS_CRAM;
	MARS_SYS_COMM6 = 0;

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS;

	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done)
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

    	pressedButton = button & ~oldButton;
    	oldButton = button;

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_LINEARITY);

			cram16[0] = COLOR(0, 0, 0);
			cram16[1] = COLOR(31, 31, 31);
		}

		if (pressedButton & SEGA_CTRL_A)
		{
			pattern++;
	
			if(pattern > 3){
		 		pattern = 1;
			}
		}

    	if (pressedButton & SEGA_CTRL_B)
		{
			done = 1;
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		switch (pattern) {
			case 1:
				cram16[0] = COLOR(0, 0, 0);
				cram16[1] = COLOR(31, 31, 31);
				drawBG(LIN_PATTERN);
			break;
				
			case 2:
				cram16[1] = COLOR(0, 0, 0);
				cram16[0] = COLOR(31, 31, 31);
				drawBG(LIN_GRID_PATTERN);
			break;

			case 3:
				cram16[1] = COLOR(0, 0, 0);
				cram16[0] = COLOR(31, 31, 31);
				drawBG(LIN_GRID_DOT_PATTERN);
			break;
		}

		MARS_SYS_COMM6 = 1;

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		drawLineTable(4);

		Hw32xDelay(frameDelay);
	}
	return;
}

void tp_gray_ramp()
{
	u16 done = 0;
	int frameDelay = 1;
	u16 button, pressedButton, oldButton = 0xFFFF;
	extern const u16 GRAYRAMP_PALETTE_DATA[];
	extern const u8 GRAYRAMP_PATTERN[];
	vu16 *cram16 = &MARS_CRAM;
	MARS_SYS_COMM6 = 0;

	for (int i = 0; i < 255; i++){
		cram16[i] = GRAYRAMP_PALETTE_DATA[i] & 0x7FFF;
	}

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS;

	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done)
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

		pressedButton = button & ~oldButton;
    	oldButton = button;

    	if (pressedButton & SEGA_CTRL_B)
		{
			done = 1;
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_GRAY);

			for (int i = 0; i < 255; i++){
				cram16[i] = GRAYRAMP_PALETTE_DATA[i] & 0x7FFF;
			}
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		drawBG(GRAYRAMP_PATTERN);

		MARS_SYS_COMM6 = 1;

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		drawLineTable(4);

		Hw32xDelay(frameDelay);
	}
	return;
}

void tp_white_rgb()
{
	u16 done = 0;
	int frameDelay = 5;
	int colorloop = 1;
	int i;
	int l = 320*224 + 0x100;
	u16 button, pressedButton, oldButton = 0xFFFF;
	vu16 *frameBuffer16 = &MARS_FRAMEBUFFER;
	MARS_SYS_COMM6 = 0;
	
	cleanup();
	marsVDP32KStart();

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS;
	
	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done)
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

		pressedButton = button & ~oldButton;
    	oldButton = button;

		if (pressedButton & SEGA_CTRL_B)
		{
			done = 1;
		}

		if (pressedButton & SEGA_CTRL_A)
		{
			colorloop++;
			if(colorloop > 5)
				colorloop = 1;
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_GENERAL);
			marsVDP32KStart();
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		switch (colorloop){
			case 1:
				for (i=0x100; i<=l; i++){
					frameBuffer16[i] = 0x7FFF;		// White
				} 
			break;

			case 2:
				for (i=0x100; i<=l; i++){
					frameBuffer16[i] = 0x0000;		// Black
				}
			break;

			case 3:
				for (i=0x100; i<=l; i++){
					frameBuffer16[i] = 0x001F;		// Red
				}
			break;
				
			case 4:
				for (i=0x100; i<=l; i++){
					frameBuffer16[i] = 0x03E0;		// Green
				}
			break;

			case 5:
				for (i=0x100; i<=l; i++){
					frameBuffer16[i] = 0x7C00;		// Blue
				}
			break;
		}

		MARS_SYS_COMM6 = 1;

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		Hw32xDelay(frameDelay);
	}
	return;
}

void tp_100_ire()
{
	u16 done = 0;
	int frameDelay = 5;
	int pattern = 1;
	u16 button, pressedButton, oldButton = 0xFFFF;
	extern const u8 IRE_PATTERN[];
	vu16 *cram16 = &MARS_CRAM;
	MARS_SYS_COMM6 = 0;

	cram16[0] = COLOR(0, 0, 0);

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS;

	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done)
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

		pressedButton = button & ~oldButton;
    	oldButton = button;

    	if (pressedButton & SEGA_CTRL_A)
		{
			pattern--;
			if(pattern < 1)
				pattern = 1;
		}

		if (pressedButton & SEGA_CTRL_B)
		{
			pattern++;
			if(pattern > 7)
				pattern = 7;
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_IRE);
			cram16[0] = COLOR(0, 0, 0);
		}

		if (pressedButton & SEGA_CTRL_START)
		{
			done = 1;
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		drawBG(IRE_PATTERN);

    	switch (pattern) {
			case 1:
				cram16[1] = COLOR(30, 30, 30);
			break;
				
			case 2:
				cram16[1] = COLOR(26, 26, 26);
			break;

			case 3:
				cram16[1] = COLOR(21, 21, 21);
			break;
				
			case 4:
				cram16[1] = COLOR(17, 17, 17);
			break;

			case 5:
				cram16[1] = COLOR(13, 13, 13);
			break;
				
			case 6:
				cram16[1] = COLOR(8, 8, 8);
			break;

			case 7:
				cram16[1] = COLOR(4, 4, 4);
			break;
		}

		MARS_SYS_COMM6 = 1;

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		drawLineTable(4);

		Hw32xDelay(frameDelay);
	}
	return;
}

void tp_sharpness()
{
	u16 done = 0;
	int frameDelay = 5;
	int pattern = 1;
	u16 button, pressedButton, oldButton = 0xFFFF;
	extern const u16 SHARPNESS_PALETTE_DATA[];
	extern const u16 SHARPNESS_BRICK_PALETTE_DATA[];
	extern const u8 SHARPNESS_PATTERN[];
	extern const u8 SHARPNESS_BRICK_PATTERN[];
	vu16 *cram16 = &MARS_CRAM;
	MARS_SYS_COMM6 = 0;

	for (int i = 0; i < 4; i++)	{
		cram16[i] = SHARPNESS_PALETTE_DATA[i] & 0x7FFF;
	}

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS;

	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done) 
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}

		pressedButton = button & ~oldButton;
		oldButton = button;

		if (pressedButton & SEGA_CTRL_B)
		{
			done = 1;
		}

		if (pressedButton & SEGA_CTRL_A)
		{
			pattern++;
	
			if(pattern > 2){
		 		pattern = 1;
			}
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_SHARPNESS);

			switch (pattern) {
			case 1:
				for (int i = 0; i < 4; i++)	{
					cram16[i] = SHARPNESS_PALETTE_DATA[i] & 0x7FFF;
				}
				drawBG(SHARPNESS_PATTERN);
			break;
				
			case 2:
				for (int i = 0; i < 255; i++){
					cram16[i] = SHARPNESS_BRICK_PALETTE_DATA[i] & 0x7FFF;
				}
				drawBG(SHARPNESS_BRICK_PATTERN);
			break;
			}
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

		switch (pattern) {
			case 1:
				for (int i = 0; i < 4; i++)	{
					cram16[i] = SHARPNESS_PALETTE_DATA[i] & 0x7FFF;
				}
				drawBG(SHARPNESS_PATTERN);
			break;
				
			case 2:
				for (int i = 0; i < 255; i++){
					cram16[i] = SHARPNESS_BRICK_PALETTE_DATA[i] & 0x7FFF;
				}
				drawBG(SHARPNESS_BRICK_PATTERN);
			break;
		}

		MARS_SYS_COMM6 = 1;

		drawLineTable(4);

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		Hw32xDelay(frameDelay);
	}
	return;
}

void tp_convergence()
{
	u16 done = 0;
	int frameDelay = 5;
	int pattern = 1;
	u16 button, pressedButton, oldButton = 0xFFFF;
	extern const u16 CONVERGENCE_GRID_PALETTE_DATA[];
	extern const u16 CONVERGENCE_COLOR_PALETTE[];
	extern const u16 CONVERGENCE_COLOR_BORDER_PALETTE[];
	extern const u8 CONVERGENCE_GRID_TILE[];
	extern const u8 CONVERGENCE_STARS_TILE[];
	extern const u8 CONVERGENCE_DOTS_TILE[];
	extern const u8 CONVERGENCE_COLOR_TILE[];
	extern const u8 CONVERGENCE_COLOR_BORDER_TILE[];
	vu16 *cram16 = &MARS_CRAM;
	MARS_SYS_COMM6 = 0;

	for (int i = 0; i < 255; i++){
		cram16[i] = CONVERGENCE_GRID_PALETTE_DATA[i] & 0x7FFF;
	}

	currentFB = MARS_VDP_FBCTL & MARS_VDP_FS; 

	MARS_SYS_COMM6 = MASTER_STATUS_OK;

	while (!done) 
	{
		button = MARS_SYS_COMM8;

		if ((button & SEGA_CTRL_TYPE) == SEGA_CTRL_NONE)
		{
			button = MARS_SYS_COMM10;
		}


		pressedButton = button & ~oldButton;
		oldButton = button;

		if (pressedButton & SEGA_CTRL_A)
		{
			pattern++;
			if(pattern > 3){
		 		pattern = 1;
			}
		}

		if (pressedButton & SEGA_CTRL_B)
		{
			if(pattern < 3){
				pattern = 4;
			}

			pattern++;
			if(pattern > 5){
		 		pattern = 4;
			}
		}

		if (pressedButton & SEGA_CTRL_Z)
		{
			DrawHelp(HELP_CONVERGENCE);

			for (int i = 0; i < 255; i++){
				cram16[i] = CONVERGENCE_GRID_PALETTE_DATA[i] & 0x7FFF;
			}
		}

		if (pressedButton & SEGA_CTRL_START)
		{
			done = 1;
		}

		while ((MARS_VDP_FBCTL & MARS_VDP_FS) != currentFB) {}

		while (MARS_SYS_COMM6 == SLAVE_LOCK);
		MARS_SYS_COMM6 = 4;

    	switch (pattern) {
			case 1:
				for (int i = 0; i < 255; i++){
					cram16[i] = CONVERGENCE_GRID_PALETTE_DATA[i] & 0x7FFF;
				}
				cram16[1] = COLOR(31, 31, 31);
				drawBG(CONVERGENCE_GRID_TILE);
			break;
				
			case 2:
				for (int i = 0; i < 255; i++){
					cram16[i] = CONVERGENCE_GRID_PALETTE_DATA[i] & 0x7FFF;
				}
				cram16[1] = COLOR(31, 31, 31);
				drawBG(CONVERGENCE_DOTS_TILE);
			break;

			case 3:
				for (int i = 0; i < 255; i++){
					cram16[i] = CONVERGENCE_GRID_PALETTE_DATA[i] & 0x7FFF;
				}
				cram16[1] = COLOR(31, 31, 31);
				drawBG(CONVERGENCE_STARS_TILE);
			break;
		
			case 4:
				for (int i = 0; i < 255; i++){
					cram16[i] = CONVERGENCE_COLOR_PALETTE[i] & 0x7FFF;
				}
				drawBG(CONVERGENCE_COLOR_TILE);
			break;
				
			case 5:
				for (int i = 0; i < 255; i++){
					cram16[i] = CONVERGENCE_COLOR_BORDER_PALETTE[i] & 0x7FFF;
				}
				drawBG(CONVERGENCE_COLOR_BORDER_TILE);
			break;
		}

		MARS_SYS_COMM6 = 1;

		drawLineTable(4);

		currentFB ^= 1;
		MARS_VDP_FBCTL = currentFB;

		Hw32xDelay(frameDelay);
	}
	return;
}
